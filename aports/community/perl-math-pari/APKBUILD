# Automatically generated by apkbuild-cpan, template 2
# Contributor: Timothy Legge <timlegge@gmail.com>
# Maintainer: Timothy Legge <timlegge@gmail.com>
pkgname=perl-math-pari
_pkgreal=Math-Pari
pkgver=2.030518
pkgrel=0
pkgdesc="Perl interface to PARI."
url="https://metacpan.org/release/Math-Pari/"
arch="all !s390x !mips !mips64" #Tests do not work on S390
license="GPL-2.0-or-later OR Artistic-1.0-Perl"
makedepends="perl-dev"
subpackages="$pkgname-doc"
source="https://cpan.metacpan.org/authors/id/I/IL/ILYAZ/modules/Math-Pari-$pkgver.zip"
builddir="$srcdir/$_pkgreal-$pkgver"

build() {
	export CFLAGS=$(perl -MConfig -E 'say $Config{ccflags}')
	PERL_MM_USE_DEFAULT=1 perl -I. Makefile.PL INSTALLDIRS=vendor
	make
}

check() {
	export CFLAGS=$(perl -MConfig -E 'say $Config{ccflags}')
	make test
}

package() {
	make DESTDIR="$pkgdir" install
	find "$pkgdir" \( -name perllocal.pod -o -name .packlist \) -delete
}

sha512sums="9bb5d789b5789b38c1d2f07b400f394f8b94872321e9b4de8177e0546fde5f13c277a268f707fbd4c35b336d5f1f86c62744e8a8d0a7d54acece89f1125a89a2  Math-Pari-2.030518.zip"
