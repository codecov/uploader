# Automatically generated by apkbuild-cpan, template 1
# Contributor:
# Maintainer: Leonardo Arena <rnalrd@alpinelinux.org>
pkgname=perl-css-minifier-xs
_pkgreal=CSS-Minifier-XS
pkgver=0.09
pkgrel=6
pkgdesc="XS based CSS minifier"
url="https://metacpan.org/release/CSS-Minifier-XS/"
arch="all"
license="GPL PerlArtistic"
cpandepends=""
cpanmakedepends="   "
depends="$cpandepends"
makedepends="perl-dev $cpanmakedepends perl-module-build"
subpackages="$pkgname-doc"
source="https://cpan.metacpan.org/authors/id/G/GT/GTERMARS/$_pkgreal-$pkgver.tar.gz"

_builddir="$srcdir/$_pkgreal-$pkgver"

prepare() {
	cd "$_builddir"
	export CFLAGS=`perl -MConfig -E 'say $Config{ccflags}'`
	perl Build.PL installdirs=vendor || return 1
}

build() {
	cd "$_builddir"
	export CFLAGS=`perl -MConfig -E 'say $Config{ccflags}'`
	./Build && ./Build test
}

package() {
	cd "$_builddir"
	./Build install destdir="$pkgdir" || return 1
	find "$pkgdir" \( -name perllocal.pod -o -name .packlist \) -delete
}

sha512sums="520e40fa4a6d70bd7692880f3bc5c813a8648dfe12946426dedf0874e180ccd98e703d67ed8b502a7b00489aa2404edce844d80b1eccc48f94156a0d5c36ad51  CSS-Minifier-XS-0.09.tar.gz"
