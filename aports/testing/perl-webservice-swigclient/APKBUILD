# Automatically generated by apkbuild-cpan, template 1
# Maintainer: Natanael Copa <ncopa@alpinelinux.org>
pkgname=perl-webservice-swigclient
_pkgreal=WebService-SwigClient
pkgver=0.001
pkgrel=3
pkgdesc="A client for connecting to a swig service"
url="https://metacpan.org/release/WebService-SwigClient"
arch="" # blocked by perl-www-curl 
license="GPL-1.0-or-later OR Artistic-1.0-Perl"
cpandepends="perl-test-most perl-test-easy perl-moo perl-file-slurp
	perl-www-curl perl-json-xs perl-common-sense perl-types-serialiser"
depends="$cpandepends"
makedepends="perl-dev"
subpackages="$pkgname-doc"
source="https://cpan.metacpan.org/authors/id/L/LO/LOGIE/$_pkgreal-$pkgver.tar.gz"

builddir="$srcdir/$_pkgreal-$pkgver"

prepare() {
	export CFLAGS=$(perl -MConfig -E 'say $Config{ccflags}')
	PERL_MM_USE_DEFAULT=1 perl Makefile.PL INSTALLDIRS=vendor
}

build() {
	export CFLAGS=$(perl -MConfig -E 'say $Config{ccflags}')
	make && make test
}

package() {
	make DESTDIR="$pkgdir" install
	find "$pkgdir" \( -name perllocal.pod -o -name .packlist \) -delete
}

sha512sums="0e1eb0981b1bbc8f004689be85b20e87b1806d43748039831e0bdb032243bb573e43c974725c865d8c98333a376882460fd77c7b247f245370891a42ee2262b1  WebService-SwigClient-0.001.tar.gz"
