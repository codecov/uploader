#!/usr/bin/env node

const app = require("../src");

var argv = require("yargs") // eslint-disable-line
  .usage("Usage: $0 <command> [options]")
  .options({
    build: {
      alias: "b",
      description: "Specify the build number manually"
    },
    branch: {
      alias: "B",
      description: "Specify the branch manually"
    },
    sha: {
      alias: "C",
      description: "Specify the commit SHA mannually"
    },
    file: {
      alias: "f",
      description: "Target file(s) to upload"
    },
    flags: {
      alias: "F",
      default: "",
      description: "Flag the upload to group coverage metrics"
    },
    name: {
      alias: "n",
      default: "",
      description: "Custom defined name of the upload. Visible in Codecov UI"
    },
    parent: {
      alias: "N",
      description: "The commit SHA of the parent for which you are uploading coverage. If not present, the parent will be determined using the API of your repository provider. When using the repository provider's API, the parent is determined via finding the closest ancestor to the commit."
    },
    pr: {
      alias: "P",
      description: "Specify the pull request number mannually"
    },
    token: {
      alias: "t",
      default: "",
      description: "Codecov upload token"
    },
    tag: {
      alias: "T",
      default: "",
      description: "Specify the git tag"
    },
    verbose: {
      alias: "v",
      type: "boolean",
      description: "Run with verbose logging"
    },
    rootDir: {
      alias: "R",
      description: "Specify the project root directory when not in a git repo"
    },
    nonZero: {
      alias: "Z",
      type: "boolean",
      default: false,
      description: "Should errors exit with a non-zero (default: false)"
    },
    dryRun: {
      alias: "d",
      type: "boolean",
      description: "Don't upload files to Codecov"
    },
    slug: {
      alias: "r",
      description: "Specify the slug manually (Enterprise use)"
    },
    url: {
      type: "string",
      description: "Change the upload host (Enterprise use)",
      default: "https://codecov.io"
    }
  })
  .version()
  .help("help")
  .alias("help", "h").argv;

app.main(argv);
